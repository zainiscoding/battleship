(this.webpackJsonpbattleship=this.webpackJsonpbattleship||[]).push([[0],{14:function(t,e,a){},15:function(t,e,a){},16:function(t,e,a){"use strict";a.r(e);var r=a(0),i=a(1),n=a.n(i),c=a(8),o=a.n(c),s=a(3),p=a(4),h=a(2),l=function(t,e,a,r,i){var n=[];if("horizontal"===r)for(var c=0;c<a;c++){var o={x:t+c,y:e,hit:!1};n.push(o)}else for(var s=0;s<a;s++){var p={x:t,y:e-s,hit:!1};n.push(p)}return null!==t&&t+a>10&&"horizontal"===r||e-a<-1&&"vertical"===r?null:{getShipLength:function(){return a},getOrientation:function(){return r},positions:n,hit:function(t,e){n.forEach((function(a){a.x===t&&a.y===e&&n.splice(n.indexOf(a),1,{x:a.x,y:a.y,hit:!0})}))},isSunk:function(){return n.every((function(t){return t.hit}))},placed:!1,getShipNumber:function(){return i}}},u=function(){for(var t=[],e=[],a=0,r=function(e){var r=e;var i={empty:!0,x:e>9?r=e%10:r,y:(e%10===0&&e>9&&(a+=1),9-a)};t.push(i)},i=0;i<100;i++)r(i);return{gameBoardArray:t,playerShipPositions:e,placeShip:function(a,r,i,n,c){var o=l(a,r,i,n,c);if(null!==o){var p=Object(s.a)(o.positions),h=!1;return e.forEach((function(t){if(p.some((function(e){return e.x===t.x&&e.y===t.y})))return h=!0})),h?o:(p.forEach((function(a){t.forEach((function(r){var i={empty:!1,ship:o};a.x===r.x&&a.y===r.y&&(i.x=r.x,i.y=r.y,t.splice(t.indexOf(r),1,i),e.push(a))}))})),!0)}},removeShip:function(a,r){if(t[r].ship){var i=t[r].ship.positions;t.forEach((function(r){i.forEach((function(i){var n={empty:!0,x:i.x,y:i.y};r.ship&&r.ship.getShipNumber()===a&&t.splice(t.indexOf(r),1,n),e.forEach((function(t){t===i&&e.splice(e.indexOf(e,1))}))}))}))}},receiveAttack:function(e,a,r){var i=t[e],n={empty:!1,hit:!0,ship:t[e].ship},c={empty:!1,sunk:!0,hit:!0,ship:t[e].ship};if(!i.ship)return t.splice(e,1,{empty:!1,miss:!0,hit:!1});i.ship.hit(a,r),i.ship.isSunk()?t.forEach((function(e){e.ship===i.ship&&t.splice(t.indexOf(e),1,c)})):t.splice(e,1,n)},placeComputerShips:function(){var t=this;function e(){return Math.floor(10*Math.random())}function a(){return Math.floor(10*Math.random())}function r(){return Math.floor(10*Math.random())%2===0?"horizontal":"vertical"}function i(t){for(var i={x:e(),y:a(),length:t,orientation:r()};null!==i.x&&i.x+t>10&&"horizontal"===i.orientation||i.y-t<-1&&"vertical"===i.orientation||void 0===i;)i.x=e(),i.y=a(),i.orientation=r();return i}var n=i(2),c=i(3),o=i(3),p=i(4),h=i(5);function l(t){return[t.x,t.y,t.length,t.orientation]}[this.placeShip.apply(this,Object(s.a)(l(n))),this.placeShip.apply(this,Object(s.a)(l(c))),this.placeShip.apply(this,Object(s.a)(l(o))),this.placeShip.apply(this,Object(s.a)(l(p))),this.placeShip.apply(this,Object(s.a)(l(h)))].forEach((function(e){for(;!0!==e;){var a=i(e.getShipLength());e=t.placeShip(a.x,a.y,a.length,a.orientation)}}))},listShips:function(){t.forEach((function(t){if(t.ship)return t}))}}},d=function(t){var e=u(),a=[];if("Player"===t){var r=l(void 0,void 0,5,"horizontal"),i=l(void 0,void 0,4,"horizontal"),n=l(void 0,void 0,3,"horizontal"),c=l(void 0,void 0,3,"horizontal"),o=l(void 0,void 0,2,"horizontal");a.push(r,i,n,c,o)}return{getName:function(){return t},gameBoard:e,makePlay:function(t,e,a,r){var i=Math.floor(100*Math.random());void 0!==e?t.placeShip(e,a,r):t.receiveAttack(i)},removeShip:function(t){var e=a.filter((function(e){return e!==a[t]}));return a=Object(s.a)(e)},playerShips:a,rotateHorizontalShip:function(t){var e=l(a[t].x,a[t].y,a[t].getShipLength(),"vertical");return a.splice(t,1,e)},rotateVerticalShip:function(t){var e=l(a[t].x,a[t].y,a[t].getShipLength(),"horizontal");return a.splice(t,1,e)}}},b=function(t){return Object(r.jsx)("div",{id:t.preparing?"board-wrapper__player-board-wrapper--preparing":"board-wrapper__player-board-wrapper",children:t.player.gameBoard.gameBoardArray.map((function(e,a){return e.ship&&e.sunk?Object(r.jsx)("div",{className:"player-ship-block--sunk",id:a,"data-x":t.setX(a),"data-y":t.setY(a),children:"Sunk Ship"},a):e.hit?Object(r.jsx)("div",{className:"player-ship-block--hit",id:a,"data-x":t.setX(a),"data-y":t.setY(a),children:"Hit"},a):e.ship&&!e.hit?Object(r.jsx)("div",{className:"player-ship-block",id:a,"data-x":t.setX(a),"data-y":t.setY(a),"data-shipnumber":e.ship.getShipNumber(),onClick:t.removeShipFromBoard,children:"Ship"},a):e.miss?Object(r.jsx)("div",{className:"miss-block",children:"Miss"},a):Object(r.jsx)(r.Fragment,{children:!e.ship&&Object(r.jsx)("div",{className:"empty-block",id:a,"data-x":t.setX(a),"data-y":t.setY(a),onClick:t.placeChosenShip},a)})}))})},j=function(t){return Object(r.jsx)("div",{id:"board-wrapper__computer-board-wrapper",children:t.computerBoardArray.map((function(e,a){return e.ship&&e.sunk?Object(r.jsx)("div",{className:"enemy-ship-block--sunk",id:a,"data-x":t.setX(a),"data-y":t.setY(a)},a):e.hit?Object(r.jsx)("div",{className:"enemy-ship-block--hit",id:a,"data-x":t.setX(a),"data-y":t.setY(a)},a):e.ship&&!e.hit?Object(r.jsx)("div",{className:"enemy-ship-block",id:a,"data-x":t.setX(a),"data-y":t.setY(a),onClick:t.playerAttackHandler},a):e.miss?Object(r.jsx)("div",{className:"miss-block"},a):Object(r.jsx)(r.Fragment,{children:!e.ship&&Object(r.jsx)("div",{className:"empty-block",id:a,"data-x":t.setX(a),"data-y":t.setY(a),onClick:t.playerAttackHandler},a)})}))})},f=function(t){return Object(r.jsx)("div",{id:"player-ships-wrapper",children:t.player.playerShips.map((function(e,a){return Object(r.jsx)(r.Fragment,{children:!1===e.placed&&Object(r.jsxs)("div",{className:"player-ships-wrapper__ship--"+e.getOrientation(),"data-shipnumber":a,"data-length":e.getShipLength(),"data-orientation":e.getOrientation(),onClick:t.chooseShip,children:[Object(r.jsx)("button",{className:"ship__rotate-ship-button",onClick:t.rotateShip,children:"Rotate"}),Object(r.jsx)(r.Fragment,{children:e.positions.map((function(e,a){return Object(r.jsx)("div",{className:"player-ship-block--docked",id:a,"data-x":t.setX(a),"data-y":t.setY(a)},a)}))})]},a)})}))})},m=function(t){return Object(r.jsx)(f,{player:t.player,setX:t.setX,setY:t.setY,chooseShip:t.chooseShip,rotateShip:t.rotateShip,mouseMove:t.mouseMove})},y=function(t){return Object(r.jsx)("div",{className:"error-wrapper",children:"Unable to place ship. Check for collision and available space."})},O=function(t){return Object(r.jsx)("div",{className:"error-wrapper",children:"Place all ships before starting the game."})},g=function(t){function e(t){return t>9?t%10:t}function a(t){return t>89?0:9-Math.floor(t/10)}return Object(r.jsxs)("div",{id:"game-wrapper",children:[Object(r.jsx)("div",{id:"header-wrapper",children:Object(r.jsx)("h1",{children:"Battleship"})}),Object(r.jsxs)("div",{id:"board-wrapper",children:[Object(r.jsx)(b,{player:t.player,setX:e,setY:a,placeChosenShip:t.placeChosenShip,removeShipFromBoard:t.removeShipFromBoard,preparing:t.preparing}),t.preparing&&Object(r.jsxs)(r.Fragment,{children:[t.placementError&&Object(r.jsx)(y,{}),t.placeAllShipsError&&Object(r.jsx)(O,{}),Object(r.jsx)(m,{player:t.player,setX:e,setY:a,chooseShip:t.chooseShip,rotateShip:t.rotateShip}),Object(r.jsx)("button",{id:"start-game-button",onClick:t.startGame,children:"Start game"})]}),!t.preparing&&Object(r.jsxs)(r.Fragment,{children:[t.playerTurn?Object(r.jsx)("h2",{className:"turn-display",children:"Player turn"}):Object(r.jsx)("h2",{className:"turn-display",children:"Computer turn"}),Object(r.jsx)(j,{computerBoardArray:t.computer.gameBoard.gameBoardArray,setX:e,setY:a,playerAttackHandler:t.playerAttackHandler,placeChosenShip:t.placeChosenShip})]})]}),t.gameOver&&Object(r.jsxs)(r.Fragment,{children:[t.playerWins&&Object(r.jsx)("div",{children:"You win!"}),!t.playerWins&&Object(r.jsx)("div",{children:"You lose!"}),Object(r.jsx)("button",{onClick:t.restartGame,children:"Restart"})]})]})},v=function(t){var e=Object(i.useState)(d("Player")),a=Object(h.a)(e,2),n=a[0],c=a[1],o=Object(i.useState)(d("Computer")),l=Object(h.a)(o,2),u=l[0],b=l[1],j=Object(i.useState)(!0),f=Object(h.a)(j,2),m=f[0],y=f[1],O=Object(i.useState)([]),v=Object(h.a)(O,2),x=v[0],S=v[1],k=Object(i.useState)(!1),A=Object(h.a)(k,2),B=A[0],N=A[1],C=Object(i.useState)(!0),E=Object(h.a)(C,2),w=E[0],Y=E[1],M=Object(i.useState)(!1),X=Object(h.a)(M,2),z=X[0],F=X[1],I=Object(i.useState)(),_=Object(h.a)(I,2),H=_[0],P=_[1],L=Object(i.useState)(0),G=Object(h.a)(L,2),T=G[0],W=G[1],J=Object(i.useState)(!1),R=Object(h.a)(J,2),V=R[0],U=R[1],q=Object(i.useState)(!1),D=Object(h.a)(q,2),K=D[0],Q=D[1],Z=Object(i.useState)(),$=Object(h.a)(Z,2),tt=$[0],et=$[1];return Object(i.useEffect)((function(){m||setTimeout((function(){!function(){var t=0;function e(){return t=Math.floor(100*Math.random())}for(S([].concat(Object(s.a)(x),[e()]));x.includes(t)&&x.length<100;)S([].concat(Object(s.a)(x),[e()]));c((function(e){return e.gameBoard.receiveAttack(t,parseInt(e.gameBoard.gameBoardArray[t].x),parseInt(e.gameBoard.gameBoardArray[t].y)),Object(p.a)({},e)})),y(!0)}()}),500)}),[m]),Object(i.useEffect)((function(){if(!w){var t=[],e=[];u.gameBoard.gameBoardArray.forEach((function(e){e.ship&&!t.includes(e.ship)&&t.push(e.ship)})),n.gameBoard.gameBoardArray.forEach((function(t){t.ship&&!e.includes(t.ship)&&e.push(t.ship)})),t.every((function(t){return t.isSunk()}))&&(et(!0),N(!0)),e.every((function(t){return t.isSunk()}))&&(et(!1),N(!0))}}),[u,w,n.gameBoard.gameBoardArray]),Object(r.jsx)(g,{player:n,computer:u,playerAttackHandler:function(t){!m||w||B||b((function(e){return e.gameBoard.receiveAttack(t.target.id,parseInt(t.target.getAttribute("data-x")),parseInt(t.target.getAttribute("data-y"))),y(!1),Object(p.a)({},e)}))},chooseShip:function(t){if(!z){var e={shipLength:parseInt(t.target.getAttribute("data-length")),orientation:t.target.getAttribute("data-orientation")};F(!0),W(parseInt(t.target.getAttribute("data-shipnumber"))),P(e),t.target.className+="--selected"}},placeChosenShip:function(t){z&&c((function(e){var a=parseInt(t.target.getAttribute("data-x")),r=parseInt(t.target.getAttribute("data-y"));return!0===e.gameBoard.placeShip(a,r,H.shipLength,H.orientation,T)?(n.playerShips[T].placed=!0,U(!1),F(!1)):U(!0),Object(p.a)({},e)}))},rotateShip:function(t){if(t.stopPropagation(),!z){var e=t.target.parentNode.getAttribute("data-shipnumber"),a=t.target.parentNode.getAttribute("data-orientation");c("horizontal"===a?function(t){return t.rotateHorizontalShip(e),Object(p.a)({},t)}:function(t){return t.rotateVerticalShip(e),Object(p.a)({},t)})}},preparing:w,startGame:function(){var t=[];n.gameBoard.gameBoardArray.forEach((function(e){e.ship&&!t.includes(e.ship)&&t.push(e.ship)})),w&&5===t.length?(u.gameBoard.placeComputerShips(),Y(!1),Q(!1)):Q(!0)},playerTurn:m,restartGame:function(){Y(!0),y(!0),S([]),N(!1),et(""),c(d("Player")),b(d("Computer"))},removeShipFromBoard:function(t){w&&!z&&c((function(e){var a=parseInt(t.target.getAttribute("data-shipnumber")),r=parseInt(t.target.id);return n.playerShips[a].placed=!1,n.gameBoard.removeShip(a,r),Object(p.a)({},e)}))},placementError:V,placeAllShipsError:K,playerWins:tt,gameOver:B})};a(14),a(15);var x=function(){return Object(r.jsx)("div",{className:"App",children:Object(r.jsx)(v,{})})};o.a.render(Object(r.jsx)(n.a.StrictMode,{children:Object(r.jsx)(x,{})}),document.getElementById("root"))}},[[16,1,2]]]);
//# sourceMappingURL=main.1e3c1ba9.chunk.js.map